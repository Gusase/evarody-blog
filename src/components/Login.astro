---
import { SignOut } from "auth-astro/components";

const { user } = Astro.props;
---

<div class="relative" x-data="{isOpen:false}">
  <div>
    <button
      type="button"
      @click="isOpen = !isOpen"
      @click.outside="isOpen = false"
      class="relative flex rounded-full bg-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800"
      id="user-menu-button"
      aria-expanded="false"
      aria-haspopup="true"
    >
      <span class="absolute -inset-1.5"></span>
      <span class="sr-only">Open user menu</span>
      <img class="h-8 w-8 rounded-full" src={user.image} alt={user.name} />
    </button>
  </div>

  <div
    :class="isOpen && 'transform opacity-100 scale-100'"
    class="absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none transition ease-in-out duration-100 transform opacity-0 scale-95"
    role="menu"
    aria-orientation="vertical"
    aria-labelledby="user-menu-button"
    tabindex="-1"
  >
    <!-- Active: "bg-gray-100", Not Active: "" -->
    <div
      class="flex p-4 flex-col"
    >
      <p
      class="inline-block truncate max-w-full min-w-0 text-black dark:text-white text-sm"
      >
        {user.name}
      </p><p
        class="inline-block truncate max-w-full min-w-0 text-sm text-[hsla(0,0%,63%,1)]"
        data-version="v1"
        style="--text-color: var(--ds-gray-900); --text-size: 0.875rem; --text-line-height: 1.25rem; --text-letter-spacing: initial; --text-weight: 400; line-height: 2; margin-top: -3px;"
      >
        {user.email}
      </p>
    </div>
    <a
      href="#"
      class="block px-4 py-2 text-sm text-gray-700"
      role="menuitem"
      tabindex="-1"
      id="user-menu-item-0">Your Profile</a
    >
    <SignOut class="block px-4 py-2 text-sm text-gray-700">Sign Out</SignOut>
  </div>
</div>
